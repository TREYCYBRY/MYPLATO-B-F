<div class="body">
  <div class="menu">
    <a class="titulo" routerLink="/inicio-usuario">MYPLATO</a>
    <div class="centro">
      <a class="nav-link" routerLink="/inicio-usuario">INICIO</a>
      <a class="nav-link" routerLink="/menu">CARTA</a>
      <a class="nav-link" routerLink="/bandeja">BANDEJA</a>
      <a class="nav-link" routerLink="/buffet">PERSONALIZAR</a>
    </div>
    <div class="btn-der">
      <a class="nav-link" routerLink="/login">Cerrar sesión</a>
    </div>
  </div>

<div class="container mx-auto p-4">
  <!-- TÍTULO -->
  <h2 class="text-2xl font-bold mb-4">Personaliza tu Plato</h2>

  <!-- SLIDER DE PLATOS PERSONALIZABLES -->
  <div *ngIf="platos.length > 0" class="mb-6">
    <div class="flex items-center justify-between">
      <button (click)="anteriorPlato()">&lt;</button>
      <div class="text-center">
        <img
          [src]="platos[platoSeleccionadoIndex].imagen"
          class="rounded-lg border-2 border-blue-400 w-60 h-40 object-cover mx-auto"
        />
        <h3 class="mt-2 font-semibold">{{ platos[platoSeleccionadoIndex].nombre }}</h3>
        <p class="text-sm">S/ {{ platos[platoSeleccionadoIndex].precio }}</p>
        <button class="mt-2 px-3 py-1 bg-gray-200 rounded" (click)="elegirPlato(platos[platoSeleccionadoIndex])">
          Elegir Plato
        </button>
      </div>
      <button (click)="siguientePlato()">&gt;</button>
    </div>
  </div>

  <!-- CATEGORÍAS -->
  <h3 class="text-xl font-bold mb-2">Categoría</h3>
  <div class="flex flex-wrap gap-2 mb-4">
    <button *ngFor="let cat of categorias" class="px-3 py-1 rounded-full text-white bg-orange-500 hover:bg-orange-600"
      (click)="seleccionarCategoria(cat)">
      {{ cat.nombre }}
    </button>
  </div>

  <!-- EXTRAS DISPONIBLES -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div *ngFor="let extra of extrasFiltrados" class="border rounded-lg p-2 text-center">
      <img [src]="extra.imagen" class="w-full h-24 object-cover rounded mb-2" />
      <p class="font-medium">{{ extra.nombre }}</p>
      <p class="text-sm">S/ {{ extra.precioporPorcion }}</p>
      <div class="flex justify-center items-center gap-2 mt-2">
        <button (click)="reducirCantidad(extra)" class="text-xl bg-gray-300 rounded px-2">-</button>
        <span>{{ obtenerCantidad(extra) }}</span>
        <button (click)="aumentarCantidad(extra)" class="text-xl bg-orange-500 text-white rounded px-2">+</button>
      </div>
    </div>
  </div>

  <!-- RESUMEN Y FINALIZAR -->
  <div class="mt-6 border-t pt-4">
    <h4 class="text-lg font-semibold">Resumen del Plato</h4>
    <ul class="list-disc list-inside text-sm mb-2">
      <li *ngIf="platoSeleccionado">Plato base: {{ platoSeleccionado.nombre }} - S/ {{ platoSeleccionado.precio }}</li>
      <li *ngFor="let e of extrasSeleccionados">
        {{ e.extra.nombre }} x {{ e.cantidad }} - S/ {{ e.extra.precioporPorcion * e.cantidad | number:'1.2-2' }}
      </li>
    </ul>
    <p class="font-bold text-lg">Total: S/ {{ calcularTotal() | number:'1.2-2' }}</p>
    <button (click)="finalizarPlatoPersonalizado()" class="mt-2 bg-black text-white px-4 py-2 rounded hover:bg-gray-800">
      Finalizar Pedido
    </button>
  </div>
</div>
